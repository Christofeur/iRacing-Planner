<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>iRacing Planner</title>
</head>
<body>

<h1>iRacing Endurance Planner</h1>

<h2>Pilotes</h2>

<input type="text" id="driverName" placeholder="Nom du pilote">
<button onclick="addDriver()">âž• Ajouter</button>

<ul id="driversList"></ul>

<hr>

<h2>Course</h2>

<label>DurÃ©e de la course (heures)</label>
<input type="number" id="raceHours" value="6">

<br><br>

<button onclick="generatePlan()">ðŸ“‹ GÃ©nÃ©rer le planning</button>

<hr>

<h2>Planning</h2>

<ol id="planList"></ol>

<script>
let drivers = [];

function addDriver() {
  const input = document.getElementById("driverName");
  const name = input.value.trim();
  if (!name) return;

  drivers.push(name);
  input.value = "";
  renderDrivers();
}

function removeDriver(index) {
  drivers.splice(index, 1);
  renderDrivers();
}

function renderDrivers() {
  const ul = document.getElementById("driversList");
  ul.innerHTML = "";

  drivers.forEach((name, i) => {
    const li = document.createElement("li");
    li.textContent = name + " ";

    const btn = document.createElement("button");
    btn.textContent = "âŒ";
    btn.onclick = () => removeDriver(i);

    li.appendChild(btn);
    ul.appendChild(li);
  });
}

function generatePlan() {
  const raceHours = Number(document.getElementById("raceHours").value);

  if (drivers.length === 0) {
    alert("Ajoute au moins un pilote");
    return;
  }

  if (raceHours <= 0) {
    alert("DurÃ©e de course invalide");
    return;
  }

  const totalStints = raceHours;

  const plan = [];
  let driverIndex = 0;

  for (let i = 0; i < totalStints; i++) {
    plan.push(drivers[driverIndex]);
    driverIndex = (driverIndex + 1) % drivers.length;
  }

  renderPlan(plan);
}

function renderPlan(plan) {
  const ol = document.getElementById("planList");
  ol.innerHTML = "";

  plan.forEach((driver, i) => {
    const li = document.createElement("li");
    li.textContent = `Relais ${i + 1} : ${driver}`;
    ol.appendChild(li);
  });
}
</script>

</body>
</html>
